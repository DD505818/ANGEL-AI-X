apiVersion: networking.k8s.io/v1
kind: NetworkPolicy
metadata:
  name: backend-netpol
spec:
  podSelector:
    matchLabels:
      app: angel-backend
  policyTypes: ["Ingress","Egress"]
  ingress:
  - from:
    - namespaceSelector: {matchLabels: {name: ingress}}
    - podSelector: {matchLabels: {app: prometheus}}
    - podSelector: {matchLabels: {app: nats}}
  egress:
  - to:
    - podSelector: {matchLabels: {app: nats}}
    - namespaceSelector: {matchLabels: {name: db}}
